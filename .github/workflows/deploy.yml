name: Deploy Selected Files to S3

on:
  push:
    branches:
      - main  # Trigger on push to main branch

jobs:
  deploy:
    runs-on: ubuntu-latest  # Use Ubuntu runner

    steps:
    - name: Checkout code
      uses: actions/checkout@v2  # Get repo code

    - name: Set up AWS CLI
      run: |
        sudo apt-get update
        sudo apt-get install -y awscli  # Install AWS CLI

    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v1  # Set AWS credentials securely
      with:
        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}  
        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: us-east-1  # Change if needed

    - name: Sync only specific files to S3
      run: |
        aws s3 sync ./static-website s3://andos-reviews-site --delete \
          --exclude "*" \
          --include "index.html" \
          --include "Static Website Logo update.png" \
          --include "login.html"
